## -*- mode: makefile -*-

## 
## This file is part of the SILC project (http://www.silc.de)
##
## Copyright (c) 2009-2011, 
##    RWTH Aachen, Germany
##    Gesellschaft fuer numerische Simulation mbH Braunschweig, Germany
##    Technische Universitaet Dresden, Germany
##    University of Oregon, Eugene USA
##    Forschungszentrum Juelich GmbH, Germany
##    Technische Universitaet Muenchen, Germany
##
## See the COPYING file in the package base directory for details.
##


COMPILER_FLAGS = $(AM_CPPFLAGS)                              \
    -I$(INC_DIR_UTIL)                                        \
    -I$(PUBLIC_INC_DIR)                                      \
    -I$(INC_ROOT)src/adapters/compiler                       \
    -I$(INC_ROOT)src/adapters/include                        \
    -I$(INC_ROOT)src/measurement/include

noinst_LTLIBRARIES += libsilc_adapter_compiler.la
libsilc_adapter_compiler_la_LIBADD = @LIBBFD@

libsilc_adapter_compiler_la_SOURCES =                         \
        $(SRC_ROOT)src/adapters/compiler/SILC_Compiler_Init.c \
	$(SRC_ROOT)src/adapters/include/SILC_Compiler_Init.h  \
	$(SRC_ROOT)src/adapters/compiler/SILC_Compiler_Data.h \
	$(SRC_ROOT)src/adapters/compiler/SILC_Compiler_Data.c

libsilc_adapter_compiler_la_CPPFLAGS = $(COMPILER_FLAGS)

if SILC_COMPILER_INTEL
 libsilc_adapter_compiler_la_SOURCES += \
    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_gnu.c 
endif 

#if SILC_COMPILER_SUN
# libsilc_adapter_compiler_la_SOURCES += \
#    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_sun.c
#endif

if SILC_COMPILER_IBM
 libsilc_adapter_compiler_la_SOURCES += \
    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_ibm.c
endif

if SILC_COMPILER_PGI
 libsilc_adapter_compiler_la_SOURCES += \
    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_pgi.c
endif

if SILC_COMPILER_GNU
if HAVE_LIBBFD
libsilc_adapter_compiler_la_CPPFLAGS += -DHAVE_LIBBFD
else
libsilc_adapter_compiler_la_CPPFLAGS += \
	-I$(INC_ROOT)src/services
libsilc_adapter_compiler_la_SOURCES  += \
	$(INC_ROOT)src/services/SILC_Timing.h
endif
libsilc_adapter_compiler_la_CPPFLAGS += -DGNU_DEMANGLE
libsilc_adapter_compiler_la_SOURCES += \
	$(SRC_ROOT)src/adapters/compiler/SILC_compiler_gnu.c
endif

#if SILC_COMPILER_HP
# libsilc_adapter_compiler_la_SOURCES += \
#    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_hp.c
#endif

if SILC_COMPILER_SX
 libsilc_adapter_compiler_la_SOURCES +=                 \
    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_ftrace.c  \
    $(SRC_ROOT)src/adapters/compiler/SILC_compiler_ftrace_1.s
endif


