/*
 * This file is part of the SILC project (http://www.silc.de)
 *
 * Copyright (c) 2009-2011,
 *    RWTH Aachen, Germany
 *    Gesellschaft fuer numerische Simulation mbH Braunschweig, Germany
 *    Technische Universitaet Dresden, Germany
 *    University of Oregon, Eugene USA
 *    Forschungszentrum Juelich GmbH, Germany
 *    Technische Universitaet Muenchen, Germany
 *
 * See the COPYING file in the package base directory for details.
 *
 */


#include "SILC_Mpi.h"
#include "config.h"

/**
 * @file       SILC_Mpi_Ext.c
 * @maintainer Daniel Lorenz <d.lorenz@fz-juelich.de>
 * @status     ALPHA
 * @ingroup    MPI_Wrapper
 *
 * @brief C interface wrappers for external interface functions
 */

/**
 * @name C wrappers
 * @{
 */

#if HAVE( DECL_MPI_ABORT ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Abort
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-1
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Abort( MPI_Comm comm,
           int      errorcode )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_ABORT ] );

        return_val = PMPI_Abort( comm, errorcode );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_ABORT ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Abort( comm, errorcode );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_GET_COUNT ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Get_count
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-1
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Get_count( MPI_Status*  status,
               MPI_Datatype datatype,
               int*         count )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_GET_COUNT ] );

        return_val = PMPI_Get_count( status, datatype, count );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_GET_COUNT ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Get_count( status, datatype, count );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_GET_ELEMENTS ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Get_elements
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-1
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Get_elements( MPI_Status*  status,
                  MPI_Datatype datatype,
                  int*         count )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_GET_ELEMENTS ] );

        return_val = PMPI_Get_elements( status, datatype, count );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_GET_ELEMENTS ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Get_elements( status, datatype, count );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_GET_PROCESSOR_NAME ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Get_processor_name
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-1
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Get_processor_name( char* name,
                        int*  resultlen )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_GET_PROCESSOR_NAME ] );

        return_val = PMPI_Get_processor_name( name, resultlen );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_GET_PROCESSOR_NAME ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Get_processor_name( name, resultlen );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_GREQUEST_COMPLETE ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Grequest_complete
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-2
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Grequest_complete( MPI_Request request )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_GREQUEST_COMPLETE ] );

        return_val = PMPI_Grequest_complete( request );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_GREQUEST_COMPLETE ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Grequest_complete( request );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_GREQUEST_START ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Grequest_start
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-2
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Grequest_start( MPI_Grequest_query_function*  query_fn,
                    MPI_Grequest_free_function*   free_fn,
                    MPI_Grequest_cancel_function* cancel_fn,
                    void*                         extra_state,
                    MPI_Request*                  request )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_GREQUEST_START ] );

        return_val = PMPI_Grequest_start( query_fn, free_fn, cancel_fn, extra_state, request );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_GREQUEST_START ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Grequest_start( query_fn, free_fn, cancel_fn, extra_state, request );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_STATUS_SET_CANCELLED ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Status_set_cancelled
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-2
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Status_set_cancelled( MPI_Status* status,
                          int         flag )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_STATUS_SET_CANCELLED ] );

        return_val = PMPI_Status_set_cancelled( status, flag );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_STATUS_SET_CANCELLED ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Status_set_cancelled( status, flag );
    }

    return return_val;
}
#endif

#if HAVE( DECL_MPI_STATUS_SET_ELEMENTS ) && !defined( SILC_MPI_NO_EXTRA ) && !defined( SILC_MPI_NO_EXT )
/**
 * Measurement wrapper for MPI_Status_set_elements
 * @note Auto-generated by wrapgen from template: SILC_Mpi_Std.w
 * @note C interface
 * @note Introduced with MPI-2
 * @ingroup ext
 * Triggers an enter and exit event.
 * It wraps the me) call with enter and exit events.
 */
int
MPI_Status_set_elements( MPI_Status*  status,
                         MPI_Datatype datatype,
                         int          count )
{
    int return_val;

    if ( SILC_MPI_IS_EVENT_GEN_ON_FOR( SILC_MPI_ENABLED_EXT ) )
    {
        SILC_MPI_EVENT_GEN_OFF();
        SILC_EnterRegion( silc_mpi_regid[ SILC__MPI_STATUS_SET_ELEMENTS ] );

        return_val = PMPI_Status_set_elements( status, datatype, count );

        SILC_ExitRegion( silc_mpi_regid[ SILC__MPI_STATUS_SET_ELEMENTS ] );
        SILC_MPI_EVENT_GEN_ON();
    }
    else
    {
        return_val = PMPI_Status_set_elements( status, datatype, count );
    }

    return return_val;
}
#endif


/**
 * @}
 */
