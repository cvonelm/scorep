if MPI_SUPPORTED
check_PROGRAMS += mpitest

mpitest_SOURCES =  $(SRC_ROOT)/test/mpi/mpitest.c
mpitest_CPPFLAGS = $(AM_CPPFLAGS)           \
    -I$(INC_ROOT)src/adapters/include       \
    -I$(INC_ROOT)src/measurement/include    \
    -I$(INC_DIR_UTIL)

mpitest_LDADD = \
    $(LIB_ROOT)libsilc_mpi.la \
    $(LIB_ROOT)libsilc_pomp_dummy.la \
    $(LIB_DIR_OTF2)libotf2.la \
    $(LIB_DIR_UTIL)libsilc_utilities.la

check_PROGRAMS += test_link

test_link_SOURCES =  $(SRC_ROOT)/test/mpi/test_link.c 
test_link_CPPFLAGS = $(AM_CPPFLAGS)           \
    -I$(INC_ROOT)src/adapters/include       \
    -I$(INC_ROOT)src/measurement/include    \
    -I$(INC_DIR_UTIL)
test_link_LDADD = \
    $(LIB_ROOT)libsilc_mpi.la \
    $(LIB_ROOT)libsilc_pomp_dummy.la \
    $(LIB_DIR_OTF2)libotf2.la \
    $(LIB_DIR_UTIL)libsilc_utilities.la \
    -lm


check_PROGRAMS += mpi_hello_world
mpi_hello_world_SOURCES =  $(SRC_ROOT)/test/mpi/mpi_hello_world.c 
mpi_hello_world_LDADD =                 \
    $(LIB_ROOT)libsilc_mpi.la           \
    $(LIB_DIR_OTF2)libotf2.la           \
    $(LIB_DIR_UTIL)libsilc_utilities.la \
    -lm

check_PROGRAMS += mpi_hello_world_uninstrumented
mpi_hello_world_uninstrumented_SOURCES =  $(SRC_ROOT)/test/mpi/mpi_hello_world.c 

endif
