#------------------------------------------------------------------------------
# General Settings
#------------------------------------------------------------------------------

PREP = @prefix@/bin/scorep --instrument
CC = $(PREP) @CC@
CFLAGS = @CFLAGS@
LDLIBS =

#------------------------------------------------------------------------------
# Rules
#------------------------------------------------------------------------------

OBJECTS = \
	jacobi.o \
	main.o


all: jacobi
#	mpiexec -np 2 ./jacobi

clean:
	rm -f jacobi $(OBJECTS) jacobi.c jacobi.h main.c
	rm -rf scorep-2*
	rm -rf scorep-measurement-tmp

jacobi: $(OBJECTS)
	$(CC) $(CFLAGS) -o jacobi $(OBJECTS) -lm $(LDLIBS)


.PHONY: all clean
.SUFFIXES: .c .o

.c.o: 
	$(CC) $(CFLAGS) -c $<


%.c:
	cp @abs_srcdir@/$@ .

%.h:
	cp @abs_srcdir@/$@ .

#------------------------------------------------------------------------------
# Dependencies
#------------------------------------------------------------------------------

jacobi.o: jacobi.c jacobi.h
main.o: main.c jacobi.h
